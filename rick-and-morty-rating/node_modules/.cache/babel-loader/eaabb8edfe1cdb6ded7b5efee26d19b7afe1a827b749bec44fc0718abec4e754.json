{"ast":null,"code":"/**\n * Serialize data into a cookie header.\n */\nfunction serialize(name, val, options) {\n  const opt = options || {};\n  const enc = encodeURIComponent;\n  /* eslint-disable-next-line no-control-regex */\n  const fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n  if (typeof enc !== 'function') {\n    throw new TypeError('option encode is invalid');\n  }\n  if (!fieldContentRegExp.test(name)) {\n    throw new TypeError('argument name is invalid');\n  }\n  const value = enc(val);\n  if (value && !fieldContentRegExp.test(value)) {\n    throw new TypeError('argument val is invalid');\n  }\n  let str = name + '=' + value;\n  if (null != opt.maxAge) {\n    const maxAge = opt.maxAge - 0;\n    if (isNaN(maxAge) || !isFinite(maxAge)) {\n      throw new TypeError('option maxAge is invalid');\n    }\n    str += '; Max-Age=' + Math.floor(maxAge);\n  }\n  if (opt.domain) {\n    if (!fieldContentRegExp.test(opt.domain)) {\n      throw new TypeError('option domain is invalid');\n    }\n    str += '; Domain=' + opt.domain;\n  }\n  if (opt.path) {\n    if (!fieldContentRegExp.test(opt.path)) {\n      throw new TypeError('option path is invalid');\n    }\n    str += '; Path=' + opt.path;\n  }\n  if (opt.expires) {\n    if (typeof opt.expires.toUTCString !== 'function') {\n      throw new TypeError('option expires is invalid');\n    }\n    str += '; Expires=' + opt.expires.toUTCString();\n  }\n  if (opt.httpOnly) {\n    str += '; HttpOnly';\n  }\n  if (opt.secure) {\n    str += '; Secure';\n  }\n  if (opt.sameSite) {\n    const sameSite = typeof opt.sameSite === 'string' ? opt.sameSite.toLowerCase() : opt.sameSite;\n    switch (sameSite) {\n      case 'lax':\n        str += '; SameSite=Lax';\n        break;\n      case 'strict':\n        str += '; SameSite=Strict';\n        break;\n      case 'none':\n        str += '; SameSite=None';\n        break;\n      default:\n        throw new TypeError('option sameSite is invalid');\n    }\n  }\n  return str;\n}\n/**\n * Based on the environment and the request we know if a secure cookie can be set.\n */\nfunction isSecureEnvironment(req) {\n  if (!req || !req.headers || !req.headers.host) {\n    throw new Error('The \"host\" request header is not available');\n  }\n  const host = req.headers.host.indexOf(':') > -1 && req.headers.host.split(':')[0] || req.headers.host;\n  if (['localhost', '127.0.0.1'].indexOf(host) > -1 || host.endsWith('.local')) {\n    return false;\n  }\n  return true;\n}\n/**\n * Serialize a cookie to a string.\n */\nfunction serializeCookie(cookie, secure) {\n  var _a, _b, _c;\n  return serialize(cookie.name, cookie.value, {\n    maxAge: cookie.maxAge,\n    expires: new Date(Date.now() + cookie.maxAge * 1000),\n    httpOnly: true,\n    secure,\n    path: (_a = cookie.path) !== null && _a !== void 0 ? _a : '/',\n    domain: (_b = cookie.domain) !== null && _b !== void 0 ? _b : '',\n    sameSite: (_c = cookie.sameSite) !== null && _c !== void 0 ? _c : 'lax'\n  });\n}\n/**\n * Get Cookie Header strings.\n */\nexport function getCookieString(req, res, cookies) {\n  const strCookies = cookies.map(c => serializeCookie(c, isSecureEnvironment(req)));\n  const previousCookies = res.getHeader('Set-Cookie');\n  if (previousCookies) {\n    if (previousCookies instanceof Array) {\n      Array.prototype.push.apply(strCookies, previousCookies);\n    } else if (typeof previousCookies === 'string') {\n      strCookies.push(previousCookies);\n    }\n  }\n  return strCookies;\n}\n/**\n * Set one or more cookies.\n */\nexport function setCookies(req, res, cookies) {\n  res.setHeader('Set-Cookie', getCookieString(req, res, cookies));\n}\n/**\n * Set one or more cookies.\n */\nexport function setCookie(req, res, cookie) {\n  setCookies(req, res, [cookie]);\n}\nexport function deleteCookie(req, res, name) {\n  setCookie(req, res, {\n    name,\n    value: '',\n    maxAge: -1\n  });\n}","map":{"version":3,"names":["serialize","name","val","options","opt","enc","encodeURIComponent","fieldContentRegExp","TypeError","test","value","str","maxAge","isNaN","isFinite","Math","floor","domain","path","expires","toUTCString","httpOnly","secure","sameSite","toLowerCase","isSecureEnvironment","req","headers","host","Error","indexOf","split","endsWith","serializeCookie","cookie","Date","now","_a","_b","_c","getCookieString","res","cookies","strCookies","map","c","previousCookies","getHeader","Array","prototype","push","apply","setCookies","setHeader","setCookie","deleteCookie"],"sources":["/workspaces/R-MPAGE/rick-and-morty-rating/node_modules/@supabase/gotrue-js/src/lib/cookies.ts"],"sourcesContent":["type Cookie = {\n  name: string\n  value: string\n  maxAge: number\n  domain?: string\n  path?: string\n  sameSite?: string\n}\n\n/**\n * Serialize data into a cookie header.\n */\nfunction serialize(\n  name: string,\n  val: string,\n  options: {\n    maxAge: number\n    domain: string\n    path: string\n    expires: Date\n    httpOnly: boolean\n    secure: boolean\n    sameSite: string\n  }\n) {\n  const opt = options || {}\n  const enc = encodeURIComponent\n  /* eslint-disable-next-line no-control-regex */\n  const fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/\n\n  if (typeof enc !== 'function') {\n    throw new TypeError('option encode is invalid')\n  }\n\n  if (!fieldContentRegExp.test(name)) {\n    throw new TypeError('argument name is invalid')\n  }\n\n  const value = enc(val)\n\n  if (value && !fieldContentRegExp.test(value)) {\n    throw new TypeError('argument val is invalid')\n  }\n\n  let str = name + '=' + value\n\n  if (null != opt.maxAge) {\n    const maxAge = opt.maxAge - 0\n\n    if (isNaN(maxAge) || !isFinite(maxAge)) {\n      throw new TypeError('option maxAge is invalid')\n    }\n\n    str += '; Max-Age=' + Math.floor(maxAge)\n  }\n\n  if (opt.domain) {\n    if (!fieldContentRegExp.test(opt.domain)) {\n      throw new TypeError('option domain is invalid')\n    }\n\n    str += '; Domain=' + opt.domain\n  }\n\n  if (opt.path) {\n    if (!fieldContentRegExp.test(opt.path)) {\n      throw new TypeError('option path is invalid')\n    }\n\n    str += '; Path=' + opt.path\n  }\n\n  if (opt.expires) {\n    if (typeof opt.expires.toUTCString !== 'function') {\n      throw new TypeError('option expires is invalid')\n    }\n\n    str += '; Expires=' + opt.expires.toUTCString()\n  }\n\n  if (opt.httpOnly) {\n    str += '; HttpOnly'\n  }\n\n  if (opt.secure) {\n    str += '; Secure'\n  }\n\n  if (opt.sameSite) {\n    const sameSite = typeof opt.sameSite === 'string' ? opt.sameSite.toLowerCase() : opt.sameSite\n\n    switch (sameSite) {\n      case 'lax':\n        str += '; SameSite=Lax'\n        break\n      case 'strict':\n        str += '; SameSite=Strict'\n        break\n      case 'none':\n        str += '; SameSite=None'\n        break\n      default:\n        throw new TypeError('option sameSite is invalid')\n    }\n  }\n\n  return str\n}\n\n/**\n * Based on the environment and the request we know if a secure cookie can be set.\n */\nfunction isSecureEnvironment(req: any) {\n  if (!req || !req.headers || !req.headers.host) {\n    throw new Error('The \"host\" request header is not available')\n  }\n\n  const host =\n    (req.headers.host.indexOf(':') > -1 && req.headers.host.split(':')[0]) || req.headers.host\n  if (['localhost', '127.0.0.1'].indexOf(host) > -1 || host.endsWith('.local')) {\n    return false\n  }\n\n  return true\n}\n\n/**\n * Serialize a cookie to a string.\n */\nfunction serializeCookie(cookie: Cookie, secure: boolean) {\n  return serialize(cookie.name, cookie.value, {\n    maxAge: cookie.maxAge,\n    expires: new Date(Date.now() + cookie.maxAge * 1000),\n    httpOnly: true,\n    secure,\n    path: cookie.path ?? '/',\n    domain: cookie.domain ?? '',\n    sameSite: cookie.sameSite ?? 'lax',\n  })\n}\n\n/**\n * Get Cookie Header strings.\n */\nexport function getCookieString(req: any, res: any, cookies: Array<Cookie>): string[] {\n  const strCookies = cookies.map((c) => serializeCookie(c, isSecureEnvironment(req)))\n  const previousCookies = res.getHeader('Set-Cookie')\n  if (previousCookies) {\n    if (previousCookies instanceof Array) {\n      Array.prototype.push.apply(strCookies, previousCookies)\n    } else if (typeof previousCookies === 'string') {\n      strCookies.push(previousCookies)\n    }\n  }\n  return strCookies\n}\n\n/**\n * Set one or more cookies.\n */\nexport function setCookies(req: any, res: any, cookies: Array<Cookie>) {\n  res.setHeader('Set-Cookie', getCookieString(req, res, cookies))\n}\n\n/**\n * Set one or more cookies.\n */\nexport function setCookie(req: any, res: any, cookie: Cookie) {\n  setCookies(req, res, [cookie])\n}\n\nexport function deleteCookie(req: any, res: any, name: string) {\n  setCookie(req, res, {\n    name,\n    value: '',\n    maxAge: -1,\n  })\n}\n"],"mappings":"AASA;;;AAGA,SAASA,SAASA,CAChBC,IAAY,EACZC,GAAW,EACXC,OAQC;EAED,MAAMC,GAAG,GAAGD,OAAO,IAAI,EAAE;EACzB,MAAME,GAAG,GAAGC,kBAAkB;EAC9B;EACA,MAAMC,kBAAkB,GAAG,uCAAuC;EAElE,IAAI,OAAOF,GAAG,KAAK,UAAU,EAAE;IAC7B,MAAM,IAAIG,SAAS,CAAC,0BAA0B,CAAC;;EAGjD,IAAI,CAACD,kBAAkB,CAACE,IAAI,CAACR,IAAI,CAAC,EAAE;IAClC,MAAM,IAAIO,SAAS,CAAC,0BAA0B,CAAC;;EAGjD,MAAME,KAAK,GAAGL,GAAG,CAACH,GAAG,CAAC;EAEtB,IAAIQ,KAAK,IAAI,CAACH,kBAAkB,CAACE,IAAI,CAACC,KAAK,CAAC,EAAE;IAC5C,MAAM,IAAIF,SAAS,CAAC,yBAAyB,CAAC;;EAGhD,IAAIG,GAAG,GAAGV,IAAI,GAAG,GAAG,GAAGS,KAAK;EAE5B,IAAI,IAAI,IAAIN,GAAG,CAACQ,MAAM,EAAE;IACtB,MAAMA,MAAM,GAAGR,GAAG,CAACQ,MAAM,GAAG,CAAC;IAE7B,IAAIC,KAAK,CAACD,MAAM,CAAC,IAAI,CAACE,QAAQ,CAACF,MAAM,CAAC,EAAE;MACtC,MAAM,IAAIJ,SAAS,CAAC,0BAA0B,CAAC;;IAGjDG,GAAG,IAAI,YAAY,GAAGI,IAAI,CAACC,KAAK,CAACJ,MAAM,CAAC;;EAG1C,IAAIR,GAAG,CAACa,MAAM,EAAE;IACd,IAAI,CAACV,kBAAkB,CAACE,IAAI,CAACL,GAAG,CAACa,MAAM,CAAC,EAAE;MACxC,MAAM,IAAIT,SAAS,CAAC,0BAA0B,CAAC;;IAGjDG,GAAG,IAAI,WAAW,GAAGP,GAAG,CAACa,MAAM;;EAGjC,IAAIb,GAAG,CAACc,IAAI,EAAE;IACZ,IAAI,CAACX,kBAAkB,CAACE,IAAI,CAACL,GAAG,CAACc,IAAI,CAAC,EAAE;MACtC,MAAM,IAAIV,SAAS,CAAC,wBAAwB,CAAC;;IAG/CG,GAAG,IAAI,SAAS,GAAGP,GAAG,CAACc,IAAI;;EAG7B,IAAId,GAAG,CAACe,OAAO,EAAE;IACf,IAAI,OAAOf,GAAG,CAACe,OAAO,CAACC,WAAW,KAAK,UAAU,EAAE;MACjD,MAAM,IAAIZ,SAAS,CAAC,2BAA2B,CAAC;;IAGlDG,GAAG,IAAI,YAAY,GAAGP,GAAG,CAACe,OAAO,CAACC,WAAW,EAAE;;EAGjD,IAAIhB,GAAG,CAACiB,QAAQ,EAAE;IAChBV,GAAG,IAAI,YAAY;;EAGrB,IAAIP,GAAG,CAACkB,MAAM,EAAE;IACdX,GAAG,IAAI,UAAU;;EAGnB,IAAIP,GAAG,CAACmB,QAAQ,EAAE;IAChB,MAAMA,QAAQ,GAAG,OAAOnB,GAAG,CAACmB,QAAQ,KAAK,QAAQ,GAAGnB,GAAG,CAACmB,QAAQ,CAACC,WAAW,EAAE,GAAGpB,GAAG,CAACmB,QAAQ;IAE7F,QAAQA,QAAQ;MACd,KAAK,KAAK;QACRZ,GAAG,IAAI,gBAAgB;QACvB;MACF,KAAK,QAAQ;QACXA,GAAG,IAAI,mBAAmB;QAC1B;MACF,KAAK,MAAM;QACTA,GAAG,IAAI,iBAAiB;QACxB;MACF;QACE,MAAM,IAAIH,SAAS,CAAC,4BAA4B,CAAC;;;EAIvD,OAAOG,GAAG;AACZ;AAEA;;;AAGA,SAASc,mBAAmBA,CAACC,GAAQ;EACnC,IAAI,CAACA,GAAG,IAAI,CAACA,GAAG,CAACC,OAAO,IAAI,CAACD,GAAG,CAACC,OAAO,CAACC,IAAI,EAAE;IAC7C,MAAM,IAAIC,KAAK,CAAC,4CAA4C,CAAC;;EAG/D,MAAMD,IAAI,GACPF,GAAG,CAACC,OAAO,CAACC,IAAI,CAACE,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,IAAIJ,GAAG,CAACC,OAAO,CAACC,IAAI,CAACG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAKL,GAAG,CAACC,OAAO,CAACC,IAAI;EAC5F,IAAI,CAAC,WAAW,EAAE,WAAW,CAAC,CAACE,OAAO,CAACF,IAAI,CAAC,GAAG,CAAC,CAAC,IAAIA,IAAI,CAACI,QAAQ,CAAC,QAAQ,CAAC,EAAE;IAC5E,OAAO,KAAK;;EAGd,OAAO,IAAI;AACb;AAEA;;;AAGA,SAASC,eAAeA,CAACC,MAAc,EAAEZ,MAAe;;EACtD,OAAOtB,SAAS,CAACkC,MAAM,CAACjC,IAAI,EAAEiC,MAAM,CAACxB,KAAK,EAAE;IAC1CE,MAAM,EAAEsB,MAAM,CAACtB,MAAM;IACrBO,OAAO,EAAE,IAAIgB,IAAI,CAACA,IAAI,CAACC,GAAG,EAAE,GAAGF,MAAM,CAACtB,MAAM,GAAG,IAAI,CAAC;IACpDS,QAAQ,EAAE,IAAI;IACdC,MAAM;IACNJ,IAAI,EAAE,CAAAmB,EAAA,GAAAH,MAAM,CAAChB,IAAI,cAAAmB,EAAA,cAAAA,EAAA,GAAI,GAAG;IACxBpB,MAAM,EAAE,CAAAqB,EAAA,GAAAJ,MAAM,CAACjB,MAAM,cAAAqB,EAAA,cAAAA,EAAA,GAAI,EAAE;IAC3Bf,QAAQ,EAAE,CAAAgB,EAAA,GAAAL,MAAM,CAACX,QAAQ,cAAAgB,EAAA,cAAAA,EAAA,GAAI;GAC9B,CAAC;AACJ;AAEA;;;AAGA,OAAM,SAAUC,eAAeA,CAACd,GAAQ,EAAEe,GAAQ,EAAEC,OAAsB;EACxE,MAAMC,UAAU,GAAGD,OAAO,CAACE,GAAG,CAAEC,CAAC,IAAKZ,eAAe,CAACY,CAAC,EAAEpB,mBAAmB,CAACC,GAAG,CAAC,CAAC,CAAC;EACnF,MAAMoB,eAAe,GAAGL,GAAG,CAACM,SAAS,CAAC,YAAY,CAAC;EACnD,IAAID,eAAe,EAAE;IACnB,IAAIA,eAAe,YAAYE,KAAK,EAAE;MACpCA,KAAK,CAACC,SAAS,CAACC,IAAI,CAACC,KAAK,CAACR,UAAU,EAAEG,eAAe,CAAC;KACxD,MAAM,IAAI,OAAOA,eAAe,KAAK,QAAQ,EAAE;MAC9CH,UAAU,CAACO,IAAI,CAACJ,eAAe,CAAC;;;EAGpC,OAAOH,UAAU;AACnB;AAEA;;;AAGA,OAAM,SAAUS,UAAUA,CAAC1B,GAAQ,EAAEe,GAAQ,EAAEC,OAAsB;EACnED,GAAG,CAACY,SAAS,CAAC,YAAY,EAAEb,eAAe,CAACd,GAAG,EAAEe,GAAG,EAAEC,OAAO,CAAC,CAAC;AACjE;AAEA;;;AAGA,OAAM,SAAUY,SAASA,CAAC5B,GAAQ,EAAEe,GAAQ,EAAEP,MAAc;EAC1DkB,UAAU,CAAC1B,GAAG,EAAEe,GAAG,EAAE,CAACP,MAAM,CAAC,CAAC;AAChC;AAEA,OAAM,SAAUqB,YAAYA,CAAC7B,GAAQ,EAAEe,GAAQ,EAAExC,IAAY;EAC3DqD,SAAS,CAAC5B,GAAG,EAAEe,GAAG,EAAE;IAClBxC,IAAI;IACJS,KAAK,EAAE,EAAE;IACTE,MAAM,EAAE,CAAC;GACV,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}